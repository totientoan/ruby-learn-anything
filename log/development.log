Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:40:08 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 8ms (ActiveRecord: 0.0ms | Allocations: 4486)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:46:31 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (Allocations: 160)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/controllers/sessions_controller.rb:7:in `generate_fake_id_token'
app/controllers/sessions_controller.rb:4:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:47:29 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 103ms (Allocations: 302)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:47:56 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 49ms (Allocations: 170)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:49:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (Allocations: 144)


  
NameError (uninitialized constant SessionsController::GoogleIDToken):
  
app/controllers/sessions_controller.rb:3:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:50:23 +0700
  
LoadError (cannot load such file -- google_id_token):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:51:27 +0700
  
LoadError (cannot load such file -- google_id_token):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:51:29 +0700
  
LoadError (cannot load such file -- google_id_token):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:51:30 +0700
  
LoadError (cannot load such file -- google_id_token):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:51:48 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
LoadError (cannot load such file -- google_id_token):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:51:55 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms | Allocations: 2752)


  
NameError (undefined local variable or method `validator' for #<SessionsController:0x0000000000b608>):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:52:18 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 150)


  
NameError (undefined local variable or method `validator' for #<SessionsController:0x0000000000e880>):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:52:20 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 105)


  
NameError (undefined local variable or method `validator' for #<SessionsController:0x0000000000e970>):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:52:30 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 2763)


  
NameError (undefined local variable or method `validator' for #<SessionsController:0x00000000008458>):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:52:50 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 315ms (ActiveRecord: 0.0ms | Allocations: 4492)


  
GoogleIDToken::SignatureError (Token not verified as issued by Google):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:55:34 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 153)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/controllers/sessions_controller.rb:11:in `generate_fake_id_token'
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 11:55:54 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 102)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/controllers/sessions_controller.rb:11:in `generate_fake_id_token'
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:32:26 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 118ms (Allocations: 1115)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:32:50 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 84ms (Allocations: 1154)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:33:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 116ms (Allocations: 1080)


  
GoogleIDToken::SignatureError (Token not verified as issued by Google):
  
app/controllers/sessions_controller.rb:7:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:34:11 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 76ms (Allocations: 1164)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:40:57 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 111ms (Allocations: 1137)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:9:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:41:16 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 86ms (Allocations: 1201)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:42:15 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 96ms (Allocations: 1159)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:45:51 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 195ms (Allocations: 1159)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 13:51:38 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 179ms (Allocations: 1153)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:13:20 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 169ms (ActiveRecord: 0.0ms | Allocations: 4414)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:17:51 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 74ms (ActiveRecord: 0.0ms | Allocations: 1213)


  
GoogleIDToken::AudienceMismatchError (Token audience mismatch):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:18:25 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"name"=>"toan1", "password"=>"[FILTERED]", "session"=>{"name"=>"toan1", "password"=>"[FILTERED]"}}
Completed 204 No Content in 216ms (ActiveRecord: 0.0ms | Allocations: 1135)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:19:57 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 83ms (ActiveRecord: 0.0ms | Allocations: 1197)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:20:08 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 248ms (ActiveRecord: 0.0ms | Allocations: 1169)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:20:37 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 76ms (ActiveRecord: 0.0ms | Allocations: 1141)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:20:51 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 222ms (ActiveRecord: 0.0ms | Allocations: 1131)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:36:35 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 142ms (Allocations: 1174)


  
GoogleIDToken::ExpiredTokenError (Token signature is expired):
  
app/controllers/sessions_controller.rb:9:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:40:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 263ms (Allocations: 1138)


  
GoogleIDToken::ExpiredTokenError (Token signature is expired):
  
app/controllers/sessions_controller.rb:9:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:42:51 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 157ms (Allocations: 1137)


  
GoogleIDToken::ExpiredTokenError (Token signature is expired):
  
app/controllers/sessions_controller.rb:9:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:43:09 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 164ms (Allocations: 1144)


  
GoogleIDToken::ExpiredTokenError (Token signature is expired):
  
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:43:28 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 109ms (Allocations: 1142)


  
GoogleIDToken::ExpiredTokenError (Token signature is expired):
  
app/controllers/sessions_controller.rb:11:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:49:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 212ms (Views: 0.6ms | Allocations: 1271)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:52:23 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 218ms (Views: 0.4ms | Allocations: 1155)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:52:37 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 79ms (Views: 0.2ms | Allocations: 1150)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:56:33 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 184ms (Views: 0.4ms | Allocations: 1102)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 14:57:33 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 86ms (Views: 0.3ms | Allocations: 1253)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:02:30 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 153ms (Views: 0.4ms | Allocations: 1166)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:03:12 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 125ms (Views: 0.5ms | Allocations: 1227)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:05:08 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
Completed 500 Internal Server Error in 155ms (Views: 0.2ms | ActiveRecord: 17.8ms | Allocations: 9290)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:06:01 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
Completed 500 Internal Server Error in 84ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 4589)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:06:34 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO `users` (`full_name`, `uid`, `avatar_url`, `provider`, `email`, `encrypted_password`) VALUES ('TÃ´ Tiáº¿n ToÃ n', NULL, 'https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c', 'google', 'toantt@vmogroup.com', '75aa993fe8a947b4')[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:16:in `google_login'
Completed 200 OK in 98ms (Views: 0.2ms | ActiveRecord: 7.4ms | Allocations: 7041)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:07:54 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
Completed 200 OK in 171ms (Views: 0.9ms | ActiveRecord: 11.4ms | Allocations: 4756)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:08:09 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
Completed 200 OK in 96ms (Views: 0.6ms | ActiveRecord: 0.8ms | Allocations: 1945)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:12:29 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 186ms (Views: 0.4ms | ActiveRecord: 12.9ms | Allocations: 12094)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:12:46 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 152ms (Views: 0.6ms | ActiveRecord: 12.7ms | Allocations: 12112)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:13:03 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms | Allocations: 2839)


  
NameError (uninitialized constant SessionsController::GoogleIDToken):
  
app/controllers/sessions_controller.rb:26:in `rescue in google_login'
app/controllers/sessions_controller.rb:6:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:15:56 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 176)


  
NameError (uninitialized constant SessionsController::GoogleIDToken):
  
app/controllers/sessions_controller.rb:26:in `rescue in google_login'
app/controllers/sessions_controller.rb:6:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:16:05 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 174)


  
NameError (uninitialized constant SessionsController::GoogleIDToken):
  
app/controllers/sessions_controller.rb:26:in `rescue in google_login'
app/controllers/sessions_controller.rb:6:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:16:14 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 174)


  
NameError (uninitialized constant SessionsController::GoogleIDToken):
  
app/controllers/sessions_controller.rb:26:in `rescue in google_login'
app/controllers/sessions_controller.rb:6:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:16:25 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 171ms (Views: 0.6ms | ActiveRecord: 6.0ms | Allocations: 12113)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:16:46 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 422 Unprocessable Entity in 111ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 1149)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:16:51 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 122ms (Views: 0.8ms | ActiveRecord: 8.6ms | Allocations: 4742)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 15:49:39 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 157ms (Views: 0.6ms | ActiveRecord: 1.5ms | Allocations: 2058)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:01:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 250ms (Views: 0.3ms | Allocations: 1078)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:02:32 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 422 Unprocessable Entity in 188ms (Views: 0.3ms | Allocations: 1143)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:03:24 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 185ms (Views: 0.6ms | ActiveRecord: 1.8ms | Allocations: 2020)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:04:39 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
...     render format.json { user: user, token: token }
...                              ^
):
  
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:04:48 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:25: syntax error, unexpected ':'
            render format.json: { user: user, token: token }
                              ^
):
  
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':'
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:05:24 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
            format.json { user: user, token: token }
                              ^
):
  
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
app/controllers/sessions_controller.rb:25: syntax error, unexpected ':', expecting '}'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-11 17:14:26 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 195ms (Views: 0.7ms | ActiveRecord: 8.1ms | Allocations: 12060)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:56:13 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
...user.slice(:id, :name, :email), token: token }
...                              ^
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:57:06 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected ';', expecting =>
...user.slice(:id, :name, :email); token: token }
...                              ^
/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected ':', expecting `end' or dummy end
...ice(:id, :name, :email); token: token }
...                              ^
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected ';', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected ':', expecting `end' or dummy end
app/controllers/sessions_controller.rb:24: syntax error, unexpected ';', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected ':', expecting `end' or dummy end
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:57:11 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting =>
...lice(:id, :name, :email) token: token }
...                         ^~~~~~
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:57:29 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected '}', expecting =>
...user.slice(:id, :name, :email)}, token: token }
...                              ^
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected '}', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected '}', expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:57:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 258ms (Views: 0.2ms | Allocations: 1218)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:59:12 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 146ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 5244)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 08:59:30 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 200 OK in 114ms (Views: 0.4ms | ActiveRecord: 11.7ms | Allocations: 4662)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:37:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 131ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 4245)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:39:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 188ms (Views: 0.3ms | ActiveRecord: 13.5ms | Allocations: 4655)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:40:05 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 240ms (Views: 0.2ms | ActiveRecord: 5.5ms | Allocations: 4590)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:40:06 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 80ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 1841)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:42:31 +0700
  
NameError (uninitialized constant ActionController::Serialization):
  
app/controllers/sessions_controller.rb:2:in `<class:SessionsController>'
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:42:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 150ms (Views: 0.3ms | ActiveRecord: 5.9ms | Allocations: 4657)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:44:36 +0700
  
NameError (uninitialized constant ActionController::UserSerializer):
  
app/controllers/sessions_controller.rb:2:in `<class:SessionsController>'
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:44:42 +0700
  
NameError (uninitialized constant ActionController::Serialization):
  
app/controllers/sessions_controller.rb:2:in `<class:SessionsController>'
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:51:01 +0700
  
NameError (uninitialized constant ActionController::Serialization):
  
app/controllers/sessions_controller.rb:2:in `<class:SessionsController>'
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:51:02 +0700
  
NameError (uninitialized constant ActionController::Serialization):
  
app/controllers/sessions_controller.rb:2:in `<class:SessionsController>'
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:51:25 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
Completed 500 Internal Server Error in 169ms (Views: 0.4ms | ActiveRecord: 14.6ms | Allocations: 4812)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:52:51 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (1.43ms)
Completed 200 OK in 161ms (Views: 10.2ms | ActiveRecord: 7.0ms | Allocations: 14661)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:54:12 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 89ms (Views: 1.4ms | ActiveRecord: 3.8ms | Allocations: 5426)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:54:27 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
...           render json: { user, serializer: UserSerializer, ...
...                              ^
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:54:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 137ms (Views: 0.8ms | ActiveRecord: 4.3ms | Allocations: 5100)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:55:42 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting `do' or '{' or '('
...    render json: { render json: user, serializer: UserSerial...
...                          ^~~~~
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting `do' or '{' or '('
app/controllers/sessions_controller.rb:24: syntax error, unexpected label, expecting `do' or '{' or '('
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:56:50 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.41ms)
Completed 200 OK in 126ms (Views: 1.0ms | ActiveRecord: 5.3ms | Allocations: 4967)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:57:01 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected '\n', expecting =>):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected '\n', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected '\n', expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 09:57:09 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Attributes (0.5ms)
Completed 200 OK in 348ms (Views: 1.4ms | ActiveRecord: 11.2ms | Allocations: 5062)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:01:47 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 500 Internal Server Error in 139ms (Views: 2.0ms | ActiveRecord: 0.0ms | Allocations: 1394)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:03:41 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.75ms)
Completed 200 OK in 194ms (Views: 3.6ms | ActiveRecord: 11.7ms | Allocations: 6000)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:04:04 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.28ms)
Completed 200 OK in 108ms (Views: 0.6ms | ActiveRecord: 3.8ms | Allocations: 4997)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:05:34 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.34ms)
Completed 200 OK in 124ms (Views: 0.8ms | ActiveRecord: 4.8ms | Allocations: 4986)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:05:48 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
...erSerializer, { token: token }, adapter: :json
...                              ^
):
  
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
app/controllers/sessions_controller.rb:24: syntax error, unexpected ',', expecting =>
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:09:55 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.69ms)
Completed 200 OK in 191ms (Views: 1.5ms | ActiveRecord: 12.5ms | Allocations: 5075)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:14:17 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.51ms)
Completed 200 OK in 158ms (Views: 1.2ms | ActiveRecord: 12.0ms | Allocations: 4972)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:15:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.53ms)
Completed 200 OK in 170ms (Views: 1.1ms | ActiveRecord: 11.7ms | Allocations: 5001)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:17:10 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 200 OK in 111ms (Views: 0.5ms | ActiveRecord: 3.1ms | Allocations: 4870)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:17:54 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.21ms)
Completed 200 OK in 116ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 5018)


Started POST "/auth/google_login2" for 127.0.0.1 at 2023-07-12 10:59:18 +0700
  
NoMethodError (undefined method `authenticate' for #<ActionDispatch::Routing::Mapper:0x00007fc13b85bd68 @set=#<ActionDispatch::Routing::RouteSet:0x00007fc13a283860>, @draw_paths=[#<Pathname:/home/vmo/rubyProject/study_video/config/routes>], @scope=#<ActionDispatch::Routing::Mapper::Scope:0x00007fc13831a0a0 @hash={:path_names=>{:new=>"new", :edit=>"edit"}}, @parent=#<ActionDispatch::Routing::Mapper::Scope:0x00007fc13b1b3b50 @hash=nil, @parent=nil, @scope_level=nil>, @scope_level=nil>, @concerns={}>):
  
config/routes.rb:8:in `block in <main>'
config/routes.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 10:59:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.88ms)
Completed 200 OK in 300ms (Views: 1.9ms | ActiveRecord: 1.0ms | Allocations: 4725)


Started POST "/auth/google_login2" for 127.0.0.1 at 2023-07-12 11:00:22 +0700
  
ActionController::RoutingError (No route matches [POST] "/auth/google_login2"):
  
Started POST "/auth/google_login2" for 127.0.0.1 at 2023-07-12 13:47:43 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/auth/google_login2"):
  
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 13:47:47 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 500 Internal Server Error in 187ms (Views: 4.7ms | ActiveRecord: 0.0ms | Allocations: 5142)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 13:58:51 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 156)


  
NameError (uninitialized constant ApplicationController::JsonWebToken):
  
app/controllers/application_controller.rb:6:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:01:08 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 911)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:04:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.62ms)
Completed 200 OK in 149ms (Views: 2.5ms | ActiveRecord: 3.7ms | Allocations: 12661)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:05:10 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 215)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:05:51 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 209)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:06:10 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 394)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:10:44 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 215)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:10:52 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 215)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:12:04 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | Allocations: 216)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:12:06 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | Allocations: 217)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:12:15 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | Allocations: 216)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:12:25 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | Allocations: 385)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:12:32 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 1151)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:13:03 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 390)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:13:08 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 218)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:13:10 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 218)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:16:57 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 1155)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:20:16 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 429)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:21:20 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 404)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:24:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.52ms)
Completed 200 OK in 138ms (Views: 2.0ms | ActiveRecord: 3.1ms | Allocations: 12504)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:24:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.28ms)
Completed 200 OK in 78ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 2064)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:24:51 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 236)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:25:09 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 230)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:28:59 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 484)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:29:23 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:11:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.49ms)
Completed 200 OK in 126ms (Views: 1.2ms | ActiveRecord: 7.1ms | Allocations: 4988)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:29:32 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 306)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:29:57 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 707)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/application_controller.rb:14:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:30:29 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 595)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/application_controller.rb:9:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:30:51 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 207)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:31:05 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 222)


  
NameError (undefined local variable or method `user_id' for #<TestController:0x0000000001f1a8>):
  
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:31:18 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 210)


  
TypeError (no implicit conversion of String into Integer):
  
app/controllers/application_controller.rb:10:in `[]'
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:33:04 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 215)


  
NameError (undefined local variable or method `decoded_token' for #<TestController:0x00000000025a30>):
  
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:33:15 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 213)


  
NameError (undefined local variable or method `decoded_token' for #<TestController:0x00000000028eb0>):
  
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:33:39 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 214)


  
NameError (undefined local variable or method `decoded' for #<TestController:0x0000000002c380>):
  
app/controllers/application_controller.rb:10:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:33:49 +0700
Processing by TestController#test_coi as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 605)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/application_controller.rb:11:in `authorize_request'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:34:08 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 1151)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:37:32 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 288)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:38:10 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 1.2ms | ActiveRecord: 2.8ms | Allocations: 2283)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:38:37 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 1130)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:38:59 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.5ms | ActiveRecord: 2.2ms | Allocations: 1122)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:44:44 +0700
Processing by TestController#test_coi as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` /* loading for inspect */ LIMIT 11[0m
  â†³ app/controllers/application_controller.rb:8:in `p'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.15ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 1.5ms | ActiveRecord: 1.5ms | Allocations: 7098)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:45:00 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 1118)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:45:23 +0700
  
SyntaxError (/home/vmo/rubyProject/study_video/app/controllers/application_controller.rb:8: syntax error, unexpected ->, expecting `end' or dummy end
....where(@decoded[0][:user_id])->first()
...                             ^~
):
  
app/controllers/application_controller.rb:8: syntax error, unexpected ->, expecting `end' or dummy end
app/controllers/application_controller.rb:8: syntax error, unexpected ->, expecting `end' or dummy end
app/controllers/test_controller.rb:1:in `<main>'
Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:45:33 +0700
Processing by TestController#test_coi as */*
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:8:in `authorize_request'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 13ms (Views: 0.6ms | ActiveRecord: 5.4ms | Allocations: 3879)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:45:50 +0700
Processing by TestController#test_coi as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:7:in `authorize_request'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 5520)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:46:21 +0700
Processing by TestController#test_coi as */*
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 157)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:46:24 +0700
Processing by TestController#test_coi as */*
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 60)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:46:35 +0700
Processing by TestController#test_coi as */*
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:7:in `authorize_request'
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 2.8ms | Allocations: 3574)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:46:39 +0700
Processing by TestController#test_coi as */*
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 306)


Started GET "/auth/test" for 127.0.0.1 at 2023-07-12 14:46:49 +0700
Processing by TestController#test_coi as */*
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` ORDER BY `users`.`id` ASC LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:7:in `authorize_request'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 747)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:55:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.4ms | Allocations: 375)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:55:58 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 5ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 3530)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 14:56:35 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 500 Internal Server Error in 5ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 3530)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 15:00:36 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 5ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 3530)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 15:02:16 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
LoadError (cannot load such file -- googleauth/client_id):
  
app/controllers/sessions_controller.rb:2:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 15:11:10 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 7ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 3530)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:07:41 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
NameError (undefined local variable or method `ruby' for main:Object):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:08:08 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 500 Internal Server Error in 6ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 3710)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:08:33 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 294ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 1926)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:10:04 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 87ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 1405)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:10:55 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:30:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.71ms)
Completed 200 OK in 102ms (Views: 2.7ms | ActiveRecord: 3.6ms | Allocations: 10967)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:11:20 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 458)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:11:33 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:30:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.22ms)
Completed 200 OK in 106ms (Views: 0.6ms | ActiveRecord: 3.5ms | Allocations: 5201)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:11:54 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:30:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (0.22ms)
Completed 200 OK in 224ms (Views: 0.5ms | ActiveRecord: 3.4ms | Allocations: 5108)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:19:37 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 369)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-12 17:20:40 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.4ms | Allocations: 360)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:48:11 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 362)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:52:04 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 360)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:54:52 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 500 Internal Server Error in 8ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 3538)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:56:50 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 372)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:56:57 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 190)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:57:01 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 5ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 3538)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:58:41 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 500 Internal Server Error in 5ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 3538)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 08:58:48 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 192)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:00:57 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 500 Internal Server Error in 254ms (Views: 2.3ms | ActiveRecord: 0.0ms | Allocations: 5020)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:01:04 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 500 Internal Server Error in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 377)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:01:47 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 500 Internal Server Error in 103ms (Views: 1.5ms | ActiveRecord: 0.0ms | Allocations: 5089)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:01:55 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 377)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:10:15 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 367)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:10:24 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 500 Internal Server Error in 7ms (Views: 1.6ms | ActiveRecord: 0.0ms | Allocations: 3538)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:10:25 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 192)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:10:50 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 378)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:26:05 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 373)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:26:11 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Filter chain halted as :authenticate_request rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | Allocations: 362)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:26:33 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (Allocations: 135)


  
NoMethodError (undefined method `authenticate_request' for #<SessionsController:0x00000000015338>):
  
activesupport (7.0.6) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.6) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.6) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.6) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.6) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.6) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.6) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.6) lib/active_support/callbacks.rb:106:in `run_callbacks'
actionpack (7.0.6) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.6) lib/action_controller/metal/rescue.rb:23:in `process_action'
actionpack (7.0.6) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.6) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.6) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.6) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.6) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.6) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.6) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.6) lib/abstract_controller/base.rb:151:in `process'
actionpack (7.0.6) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.6) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.7) lib/rack/etag.rb:27:in `call'
rack (2.2.7) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.7) lib/rack/head.rb:12:in `call'
activerecord (7.0.6) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.6) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.6) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.7) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.7) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.6) lib/rails/engine.rb:530:in `call'
puma (5.6.6) lib/puma/configuration.rb:252:in `call'
puma (5.6.6) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.6) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.6) lib/puma/request.rb:76:in `handle_request'
puma (5.6.6) lib/puma/server.rb:443:in `process_client'
puma (5.6.6) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:26:39 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:35:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 500 Internal Server Error in 159ms (Views: 0.7ms | ActiveRecord: 12.6ms | Allocations: 9770)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:27:42 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:32:in `google_login'
[active_model_serializers] Rendered UserSerializer with ActiveModelSerializers::Adapter::Json (1.09ms)
Completed 200 OK in 180ms (Views: 4.7ms | ActiveRecord: 10.5ms | Allocations: 13358)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:31:00 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 139ms (Views: 1.3ms | ActiveRecord: 4.4ms | Allocations: 5264)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:31:55 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 500 Internal Server Error in 105ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 4974)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:32:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 500 Internal Server Error in 86ms (Views: 0.5ms | ActiveRecord: 0.5ms | Allocations: 2020)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:33:10 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 500 Internal Server Error in 135ms (Views: 1.7ms | ActiveRecord: 8.2ms | Allocations: 5053)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:33:37 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 105ms (Views: 0.7ms | ActiveRecord: 3.5ms | Allocations: 4971)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:33:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 500 Internal Server Error in 113ms (Views: 1.5ms | ActiveRecord: 9.2ms | Allocations: 4974)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:33:57 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 500 Internal Server Error in 118ms (Views: 1.7ms | ActiveRecord: 12.3ms | Allocations: 4981)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:36:20 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 131ms (Views: 0.7ms | ActiveRecord: 0.6ms | Allocations: 2106)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:36:41 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:14:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.22ms)
Completed 200 OK in 136ms (Views: 0.6ms | ActiveRecord: 0.5ms | Allocations: 3485)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 09:59:14 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
LoadError (cannot load such file -- google/apis/oauth2):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:00:38 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
LoadError (cannot load such file -- google/api_client):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:00:39 +0700
  
LoadError (cannot load such file -- google/api_client):
  
app/controllers/sessions_controller.rb:1:in `<main>'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:00:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 5ms (Views: 1.0ms | ActiveRecord: 0.0ms | Allocations: 3473)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:00:56 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 187)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:01:14 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 368)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:14:57 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 364)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:14:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 1ms (Views: 0.3ms | Allocations: 183)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:15:10 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 0ms (Views: 0.3ms | Allocations: 183)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:15:40 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 393)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:16:01 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | Allocations: 360)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:16:06 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 1ms (Views: 0.3ms | Allocations: 183)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:16:11 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 5ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 3532)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:21:06 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 414)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:21:26 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2b1a267d60 @http_body=#<HTTP::Message::Body:0x00007f2b1a267d10 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2b1a20dc20 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:21:27 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x779c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2b180306e8
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:27:in `google_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '3a0b68d887f982287003695f141b9bfd021b3b0b401252e8166c98eaffb3cbe8' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (2.3ms)
Completed 200 OK in 353ms (Views: 3.0ms | ActiveRecord: 7.2ms | Allocations: 20770)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:23:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2ae3fac4f8 @http_body=#<HTTP::Message::Body:0x00007f2ae3fac4a8 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2ae3f2fca0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:23:59 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x9268 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2ae3f2e760
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 500 Internal Server Error in 245ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 6115)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:24:29 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2b1b7ca4c8 @http_body=#<HTTP::Message::Body:0x00007f2b1b7ca478 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2b1a31dfc0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:24:29 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xac44 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2b1a31ca80
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:27:in `google_login'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '50fe48e8df0dfbf98b9142f67204f6a9a74eeac8c5c10570175def1cfb2b5780' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.38ms)
Completed 200 OK in 383ms (Views: 1.4ms | ActiveRecord: 15.9ms | Allocations: 13034)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:24:44 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2b1a10c8f8 @http_body=#<HTTP::Message::Body:0x00007f2b1a10c808 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2b1b779c58 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 03:24:44 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xacd0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2b1b778718
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:27:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mUser Update (0.2ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '0095c01678c57be29e0c3bb73e24bb41f158976bbc068483fe5b5dc37eba04c5' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:63:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.12ms)
Completed 200 OK in 274ms (Views: 0.4ms | ActiveRecord: 2.9ms | Allocations: 9556)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:25:20 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2b18011ae0 @http_body=#<HTTP::Message::Body:0x00007f2b18011a40 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2ae3ecd488 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 03:25:20 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xc6e8 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2ae3ecbf48
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:20:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:56:in `generate_refresh_token'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'c7ff8f054f61e4269ccbb23bffc744ad290a93f768c4675d0e5c287ba7b3db7d' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:56:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:56:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.14ms)
Completed 200 OK in 210ms (Views: 0.6ms | ActiveRecord: 6.3ms | Allocations: 11920)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 10:35:01 +0700
  
ActionController::RoutingError (No route matches [POST] "/auth/refresh_token"):
  
Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 10:35:09 +0700
  
AbstractController::ActionNotFound (The action 'refresh_token' could not be found for SessionsController):
  
actionpack (7.0.6) lib/abstract_controller/base.rb:146:in `process'
actionpack (7.0.6) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.6) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.7) lib/rack/etag.rb:27:in `call'
rack (2.2.7) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.7) lib/rack/head.rb:12:in `call'
activerecord (7.0.6) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.6) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.6) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.7) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.7) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.6) lib/rails/engine.rb:530:in `call'
puma (5.6.6) lib/puma/configuration.rb:252:in `call'
puma (5.6.6) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.6) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.6) lib/puma/request.rb:76:in `handle_request'
puma (5.6.6) lib/puma/server.rb:443:in `process_client'
puma (5.6.6) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:38:10 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f2b1a264200 @http_body=#<HTTP::Message::Body:0x00007f2b1a2641b0 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2ae3dfd490 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:11 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xfbe0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f2ae3dfc1d0 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0xfbe0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:11 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f2b1a32d308 @http_body=#<HTTP::Message::Body:0x00007f2b1a32d2b8 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2ae3df8170 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:11 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xfbf4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f2ae3df7270 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0xfbf4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:11 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.23ms)
Completed 500 Internal Server Error in 1020ms (Views: 2.1ms | Allocations: 9385)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:38:50 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c106ef200 @http_body=#<HTTP::Message::Body:0x00007f8c106ef1b0 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c10718678 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:50 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c107171d8 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:38:50 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c106e8310 @http_body=#<HTTP::Message::Body:0x00007f8c106e82c0 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c10713218 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 03:38:51 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44e8 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c10712318 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x44e8 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 03:38:51 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.13ms)
Completed 500 Internal Server Error in 842ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 13877)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:39:15 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0f1ae9e0 @http_body=#<HTTP::Message::Body:0x00007f8c0f1ae990 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0f207950 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:15 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5f28 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0f206690 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x5f28 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:15 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0f1a7af0 @http_body=#<HTTP::Message::Body:0x00007f8c0f1a7aa0 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0f202630 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:15 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5f3c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0f201730 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x5f3c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:15 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 586ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 9360)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:39:34 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce8b558 @http_body=#<HTTP::Message::Body:0x00007f8c0ce8b508 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0ceb7a90 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:34 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7968 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0ceb67d0 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x7968 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:39:34 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce844d8 @http_body=#<HTTP::Message::Body:0x00007f8c0ce84488 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0ceb2770 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 03:39:35 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x797c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0ceb1870 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x797c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 03:39:35 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 590ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 9563)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:43:15 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce1ecf0 @http_body=#<HTTP::Message::Body:0x00007f8c0ce1eca0 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0cdc5290 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:43:16 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x93bc URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0cdc3fd0 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x93bc URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 03:43:16 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce178b0 @http_body=#<HTTP::Message::Body:0x00007f8c0ce17860 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0ce0ff20 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 03:43:16 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x93d0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0ce0f020 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x93d0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 03:43:16 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 500 Internal Server Error in 780ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 9507)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:45:52 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"openid https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce8e488 @http_body=#<HTTP::Message::Body:0x00007f8c0ce8e438 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0cebfbf0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 03:45:52 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x9420 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0cebe930 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x9420 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 03:45:52 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f8c0ce87818 @http_body=#<HTTP::Message::Body:0x00007f8c0ce877c8 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0ceba8d0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 03:45:52 GMT"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x9434 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f8c0ceb99d0 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x9434 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Date", "Thu, 13 Jul 2023 03:45:52 GMT"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 693ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 9224)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 10:47:11 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f8c0f25e6b0 @http_body=#<HTTP::Message::Body:0x00007f8c0f25e660 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f8c0cf3c308 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 03:47:11 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x9498 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f8c0f1c6590
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:21:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:57:in `generate_refresh_token'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'b5591cd3adf6a57b9afbce1d745780ac5d3736112aecee388190fbf5ef036c43' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:57:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.25ms)
Completed 200 OK in 267ms (Views: 1.6ms | ActiveRecord: 6.0ms | Allocations: 18974)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 10:50:34 +0700
  
AbstractController::ActionNotFound (The action 'refresh_token' could not be found for SessionsController):
  
actionpack (7.0.6) lib/abstract_controller/base.rb:146:in `process'
actionpack (7.0.6) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.6) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.6) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.6) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.7) lib/rack/etag.rb:27:in `call'
rack (2.2.7) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.7) lib/rack/head.rb:12:in `call'
activerecord (7.0.6) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.6) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.6) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.7) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.7) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.6) lib/rails/engine.rb:530:in `call'
puma (5.6.6) lib/puma/configuration.rb:252:in `call'
puma (5.6.6) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.6) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.6) lib/puma/request.rb:76:in `handle_request'
puma (5.6.6) lib/puma/server.rb:443:in `process_client'
puma (5.6.6) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 10:50:57 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = 'b5591cd3adf6a57b9afbce1d745780ac5d3736112aecee388190fbf5ef036c43' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:56:in `refresh_token'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.5ms | Allocations: 3892)


  
NameError (undefined local variable or method `refresh_token_expires_at' for #<User id: 1, full_name: "TÃ´ Tiáº¿n ToÃ n", uid: nil, avatar_url: "https://lh3.googleusercontent.com/a/AAcHTtfODJJqlj...", provider: "google", email: "toantt@vmogroup.com", encrypted_password: [FILTERED], refresh_token: [FILTERED]>):
  
app/models/user.rb:9:in `refresh_token_expired?'
app/controllers/sessions_controller.rb:57:in `refresh_token'
Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:01:33 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = 'b5591cd3adf6a57b9afbce1d745780ac5d3736112aecee388190fbf5ef036c43' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:56:in `refresh_token'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms | Allocations: 3353)


  
NameError (undefined local variable or method `refresh_token_expires_at' for #<User id: 1, full_name: "TÃ´ Tiáº¿n ToÃ n", uid: nil, avatar_url: "https://lh3.googleusercontent.com/a/AAcHTtfODJJqlj...", provider: "google", email: "toantt@vmogroup.com", encrypted_password: [FILTERED], refresh_token: [FILTERED]>):
  
app/models/user.rb:10:in `refresh_token_expired?'
app/controllers/sessions_controller.rb:57:in `refresh_token'
Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:06:10 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 79)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:06:26 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 6ms (ActiveRecord: 0.0ms | Allocations: 2672)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 11:06:36 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007fce3ca0d540 @http_body=#<HTTP::Message::Body:0x00007fce3ca0d4f0 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fce3c9fe9c8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 04:06:36 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44fc URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007fce3c9c1e38
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:18:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e2944' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.6ms)
Completed 200 OK in 272ms (Views: 2.7ms | ActiveRecord: 6.9ms | Allocations: 19650)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:06:48 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e2944' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'cee5a928c91e86038276a1ac0dac44e5ece933e43538aeb987dcc28cf6a5bd99' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 3.2ms | Allocations: 2922)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:06:55 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e24' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms | Allocations: 628)


  
NoMethodError (undefined method `update' for nil:NilClass):
  
app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
app/controllers/sessions_controller.rb:58:in `refresh_token'
Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:07:27 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 73)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:07:48 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 73)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:22 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 74)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:23 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e24' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.07ms)
Completed 422 Unprocessable Entity in 7ms (Views: 0.6ms | ActiveRecord: 2.5ms | Allocations: 2050)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:27 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
Completed 204 No Content in 5ms (ActiveRecord: 0.0ms | Allocations: 2672)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:29 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e24' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 7ms (Views: 1.3ms | ActiveRecord: 2.0ms | Allocations: 3539)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:30 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = '80b8c3a0f9c5cc4931d6f1f058900c8f426688beb4314af5238701c3255e24' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.04ms)
Completed 422 Unprocessable Entity in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 669)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 11:08:44 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007fa7c41350b0 @http_body=#<HTTP::Message::Body:0x00007fa7c4135060 @body="{\n" + "  \"id\": \"100130767718877697335\",\n" + "  \"email\": \"toantt@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"TÃ´ Tiáº¿n ToÃ n\",\n" + "  \"given_name\": \"TÃ´ Tiáº¿n\",\n" + "  \"family_name\": \"ToÃ n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fa7c4162ee8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 04:08:44 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5fb4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007fa7c409b730
 @email="toantt@vmogroup.com",
 @family_name="ToÃ n",
 @given_name="TÃ´ Tiáº¿n",
 @hd="vmogroup.com",
 @id="100130767718877697335",
 @locale="vi",
 @name="TÃ´ Tiáº¿n ToÃ n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtfODJJqljcLrNGpW1lGF_BRJp7TeH5X5_DOepKGUcCogA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'toantt@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:18:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mUser Update (1.2ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'e3cd5fd58c2c6777cb8bf4a23ac3cc0a2ae23cf63e051449bdabae1985195bc7' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.28ms)
Completed 200 OK in 225ms (Views: 1.7ms | ActiveRecord: 8.7ms | Allocations: 18138)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:08:53 +0700
Error occurred while parsing request parameters.
Contents:

{
    "refresh_token": "e3cd5fd58c2c6777cb8bf4a23ac3cc0a2ae23cf63e051449bdabae1985195bc7"
Processing by SessionsController#refresh_token as */*
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms | Allocations: 38)


Started POST "/auth/refresh_token" for 127.0.0.1 at 2023-07-13 11:09:34 +0700
Processing by SessionsController#refresh_token as */*
  Parameters: {"refresh_token"=>"[FILTERED]", "session"=>{"refresh_token"=>"[FILTERED]"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`refresh_token` = 'e3cd5fd58c2c6777cb8bf4a23ac3cc0a2ae23cf63e051449bdabae1985195bc7' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:57:in `refresh_token'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '39d374d65a0c538a51ac8749c0c2fa4dce84f40d7d2c30a0564cefad44509086' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:79:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.19ms)
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 2.7ms | Allocations: 2837)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:19:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007fa7c40acb70 @http_body=#<HTTP::Message::Body:0x00007fa7c40acb20 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fa7bd565ab0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:19:02 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7ad0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007fa7bd564570
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:18:in `google_login'
Completed 500 Internal Server Error in 272ms (ActiveRecord: 0.4ms | Allocations: 9038)


  
NameError (uninitialized constant Google::Auth::TokenError):
  
app/controllers/sessions_controller.rb:41:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:19:34 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007fa7c4134160 @http_body=#<HTTP::Message::Body:0x00007fa7c4134110 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fa7bd4fc948 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:19:34 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7b5c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007fa7bd4fb688 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x7b5c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:19:34 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007fa7c4e8c088 @http_body=#<HTTP::Message::Body:0x00007fa7c4e8c038 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fa7bd4f76c8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:19:35 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7b70 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007fa7bd4f67c8 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x7b70 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:19:35 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 422 Unprocessable Entity in 942ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 9564)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:19:59 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007fa7c4e819f8 @http_body=#<HTTP::Message::Body:0x00007fa7c4e819a8 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007fa7bd4d99c0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:19:59 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7bc0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007fa7bd4d8480
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:18:in `google_login'
Completed 500 Internal Server Error in 152ms (ActiveRecord: 0.2ms | Allocations: 6490)


  
NameError (uninitialized constant Google::Auth::TokenError):
  
app/controllers/sessions_controller.rb:41:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:20:35 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f1238f2e0d0 @http_body=#<HTTP::Message::Body:0x00007f1238f2e080 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f1238f47120 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:20:36 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f1238eed468
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:20:in `google_login'
Completed 500 Internal Server Error in 227ms (ActiveRecord: 4.0ms | Allocations: 18093)


  
NameError (uninitialized constant Google::Auth::TokenError):
  
app/controllers/sessions_controller.rb:43:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:21:23 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f1238f2aed0 @http_body=#<HTTP::Message::Body:0x00007f1238f2ae80 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f123820fde0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 06:21:23 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5fb4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f123820e8a0
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
Completed 500 Internal Server Error in 195ms (ActiveRecord: 4.5ms | Allocations: 9568)


  
NameError (uninitialized constant Google::Auth::TokenError):
  
app/controllers/sessions_controller.rb:43:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:22:30 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f9a2132e070 @http_body=#<HTTP::Message::Body:0x00007f9a2132e020 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f9a21347598 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:22:30 GMT"], ["Pragma", "no-cache"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f9a212ed9f8
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
Completed 500 Internal Server Error in 244ms (ActiveRecord: 4.2ms | Allocations: 18030)


  
NameError (uninitialized constant Google::Apis::TokenError):
  
app/controllers/sessions_controller.rb:43:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:22:45 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f9a2132f380 @http_body=#<HTTP::Message::Body:0x00007f9a2132f330 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f9a19ad5790 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:22:45 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5fa0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f9a19ad4250
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
Completed 500 Internal Server Error in 191ms (ActiveRecord: 6.2ms | Allocations: 9576)


  
NameError (uninitialized constant Google::Apis::SignatureError):
  
app/controllers/sessions_controller.rb:43:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:24:02 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f9a20047628 @http_body=#<HTTP::Message::Body:0x00007f9a20047538 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f9a1bdb3a28 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 06:24:03 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7a1c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f9a1bdb24e8
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
Completed 500 Internal Server Error in 290ms (ActiveRecord: 2.6ms | Allocations: 9514)


  
NameError (uninitialized constant Google::Apis::AudienceMismatchError):
  
app/controllers/sessions_controller.rb:46:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:24:25 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f9a1ba37958 @http_body=#<HTTP::Message::Body:0x00007f9a1ba37908 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f9a21526918 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:24:26 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x9498 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f9a20b0fa10
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
Completed 500 Internal Server Error in 191ms (ActiveRecord: 3.5ms | Allocations: 9374)


  
NameError (uninitialized constant Google::Apis::SignatureError):
  
app/controllers/sessions_controller.rb:43:in `rescue in google_login'
app/controllers/sessions_controller.rb:10:in `google_login'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:24:46 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f9a1bb0e750 @http_body=#<HTTP::Message::Body:0x00007f9a1bb0e6b0 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f9a19b2a790 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:24:47 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0xaf3c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f9a19b29250
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 500 Internal Server Error in 223ms (Views: 0.9ms | ActiveRecord: 3.8ms | Allocations: 10116)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:25:19 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f728efdf428 @http_body=#<HTTP::Message::Body:0x00007f728efdf3d8 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728f008030 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:25:19 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f728ef8e898
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.11ms)
Completed 500 Internal Server Error in 181ms (Views: 1.2ms | ActiveRecord: 3.1ms | Allocations: 18797)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:26:37 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f728da8e2e0 @http_body=#<HTTP::Message::Body:0x00007f728da8e290 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728dae4258 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:26:37 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x5fb4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f728dae2d18
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO `users` (`full_name`, `uid`, `avatar_url`, `provider`, `email`, `encrypted_password`, `refresh_token`) VALUES ('Äáº·ng Anh Tuáº¥n', NULL, 'https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c', 'google', 'tuanda2@vmogroup.com', 'f3ab03d773e673d9', NULL)[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '38a650220420ce0e29c572057af0d2c6863f8f398e91486e4f7f1beabf874e7a' WHERE `users`.`id` = 2[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.19ms)
Completed 200 OK in 241ms (Views: 1.6ms | ActiveRecord: 9.1ms | Allocations: 15113)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:27:06 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f728c127fe0 @http_body=#<HTTP::Message::Body:0x00007f728c127f90 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c0a9e38 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:27:06 GMT"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x60e0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f728c0a8b78 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x60e0 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:27:06 GMT"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f728c1211e0 @http_body=#<HTTP::Message::Body:0x00007f728c121190 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c0a4bb8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 06:27:07 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x60f4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f728c0a3cb8 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x60f4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 06:27:07 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.05ms)
Completed 422 Unprocessable Entity in 736ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 9379)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:27:12 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f728c068398 @http_body=#<HTTP::Message::Body:0x00007f728c068348 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c026ec0 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:27:12 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x6130 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f728c025980
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '47f5fe879a967cab63ae673999dfefc34091f2e636d1925fcf3757b5dfe334bb' WHERE `users`.`id` = 2[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:73:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.16ms)
Completed 200 OK in 270ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 8606)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:30:27 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f725f69e9d8 @http_body=#<HTTP::Message::Body:0x00007f725f69e988 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f725f65ba48 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Date", "Thu, 13 Jul 2023 06:30:27 GMT"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7b70 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f725f65a508
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '347e718475fedcba8e46c2d3835692e6bddf6167a83c080a1b198842157e8be6' WHERE `users`.`id` = 2[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 200 OK in 301ms (Views: 0.7ms | ActiveRecord: 6.4ms | Allocations: 11816)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:30:30 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f728c06b2c8 @http_body=#<HTTP::Message::Body:0x00007f728c06b278 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c0a8ad8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:30:30 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7bfc URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f728c0a7598
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '4631ab039dec73f9083fe3bfa2daf1b5b647732944b0785bdf912ddc0a1ff1ae' WHERE `users`.`id` = 2[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.42ms)
Completed 200 OK in 193ms (Views: 1.0ms | ActiveRecord: 4.8ms | Allocations: 8518)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:30:38 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f728db2db60 @http_body=#<HTTP::Message::Body:0x00007f728db2db10 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c101ae8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:30:38 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7c4c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f728c100828 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x7c4c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:30:38 GMT"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
401
#<HTTP::Message:0x00007f728db249c0 @http_body=#<HTTP::Message::Body:0x00007f728db24970 @body="{\n" + "  \"error\": {\n" + "    \"code\": 401,\n" + "    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "    \"errors\": [\n" + "      {\n" + "        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n" + "        \"domain\": \"global\",\n" + "        \"reason\": \"unauthorized\"\n" + "      }\n" + "    ],\n" + "    \"status\": \"UNAUTHENTICATED\"\n" + "  }\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728c11c780 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:30:39 GMT"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="Unauthorized", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7c60 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=401>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Caught error Unauthorized
Error - #<Google::Apis::AuthorizationError: Unauthorized status_code: 401 header: #<HTTP::Message::Headers:0x00007f728c11b880 @http_version="1.1", @body_size=0, @chunked=false, @request_method="GET", @request_uri=#<Addressable::URI:0x7c60 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @request_query=nil, @request_absolute_uri=nil, @status_code=401, @reason_phrase="Unauthorized", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @is_request=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:30:39 GMT"], ["Pragma", "no-cache"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Type", "application/json; charset=UTF-8"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @dumped=false> body: "{\n  \"error\": {\n    \"code\": 401,\n    \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n    \"errors\": [\n      {\n        \"message\": \"Request is missing required authentication credential. Expected OAuth 2 access token, login cookie or other valid authentication credential. See https://developers.google.com/identity/sign-in/web/devconsole-project.\",\n        \"domain\": \"global\",\n        \"reason\": \"unauthorized\"\n      }\n    ],\n    \"status\": \"UNAUTHENTICATED\"\n  }\n}\n">

Retrying after authentication failure
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.06ms)
Completed 422 Unprocessable Entity in 558ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 9326)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:30:42 +0700
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f728ef39f28 @http_body=#<HTTP::Message::Body:0x00007f728ef39e88 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f728db4ea68 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Date", "Thu, 13 Jul 2023 06:30:42 GMT"], ["Pragma", "no-cache"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x7c9c URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f728db4d528
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'eadcca546676e563b33dcd0565240508cdcdd2ce62686cdd7d774e4c9ada568f' WHERE `users`.`id` = 2[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.24ms)
Completed 200 OK in 216ms (Views: 0.8ms | ActiveRecord: 4.1ms | Allocations: 8534)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3142694926769428485', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20230713063901)
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `full_name` varchar(255), `avatar_url` varchar(255), `provider` varchar(255), `email` varchar(255), `password` varchar(255), `refresh_token` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230713063901')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('3142694926769428485')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3142694926769428485', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20230713063901)
  [1m[35m (11.0ms)[0m  [1m[35mDROP TABLE `users`[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (2.0ms)[0m  [1m[31mDELETE FROM `schema_migrations` WHERE `schema_migrations`.`version` = '20230713063901'[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3142694926769428485')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('3142694926769428485', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateUsers (20230713063901)
  [1m[35m (12.9ms)[0m  [1m[35mCREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `full_name` varchar(255), `avatar_url` varchar(255), `provider` varchar(255), `email` varchar(255), `password` varchar(255), `refresh_token` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230713063901')[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('3142694926769428485')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:40:13 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mCACHE ActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate RAILS_ENV=development

You have 1 pending migration:

20230713063901_create_users.rb


):
  
activerecord (7.0.6) lib/active_record/migration.rb:627:in `check_pending!'
activerecord (7.0.6) lib/active_record/migration.rb:592:in `block (2 levels) in call'
activesupport (7.0.6) lib/active_support/file_update_checker.rb:83:in `execute'
activesupport (7.0.6) lib/active_support/file_update_checker.rb:93:in `execute_if_updated'
activerecord (7.0.6) lib/active_record/migration.rb:599:in `block in call'
activerecord (7.0.6) lib/active_record/migration.rb:589:in `synchronize'
activerecord (7.0.6) lib/active_record/migration.rb:589:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.6) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.6) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.6) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.6) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.6) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.7) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.6) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.6) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.7) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.6) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.6) lib/rails/engine.rb:530:in `call'
puma (5.6.6) lib/puma/configuration.rb:252:in `call'
puma (5.6.6) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.6) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.6) lib/puma/request.rb:76:in `handle_request'
puma (5.6.6) lib/puma/server.rb:443:in `process_client'
puma (5.6.6) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:40:29 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f2a9ff3ddf8 @http_body=#<HTTP::Message::Body:0x00007f2a9ff3dda8 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f2a9ff57280 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Pragma", "no-cache"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:40:29 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f2a9feddae8
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO `users` (`full_name`, `avatar_url`, `provider`, `email`, `password`, `refresh_token`, `created_at`, `updated_at`) VALUES ('Äáº·ng Anh Tuáº¥n', 'https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c', 'google', 'tuanda2@vmogroup.com', '3433d4d2c3beb934', NULL, '2023-07-13 06:40:29.586908', '2023-07-13 06:40:29.586908')[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = 'bdb973a2ff67e5dd20d0e49ada1e902e9b5c062c44065be351bae6b67adc2703', `users`.`updated_at` = '2023-07-13 06:40:29.595126' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.17ms)
Completed 200 OK in 278ms (Views: 2.0ms | ActiveRecord: 12.9ms | Allocations: 24958)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:50:13 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f6321cb9a18 @http_body=#<HTTP::Message::Body:0x00007f6321cb99c8 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f6321ce0820 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Date", "Thu, 13 Jul 2023 06:50:13 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f6321c63a78
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '9c98e22980282c94ad29291979bbd6b464368d8bd88bc73ec52b7212553a5cb4', `users`.`updated_at` = '2023-07-13 06:50:13.817236' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.34ms)
Completed 200 OK in 255ms (Views: 2.3ms | ActiveRecord: 8.7ms | Allocations: 22942)


Started POST "/auth/google_login" for 127.0.0.1 at 2023-07-13 13:57:56 +0700
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by SessionsController#google_login as */*
  Parameters: {"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]", "session"=>{"access_token"=>"[FILTERED]", "id_token"=>"[FILTERED]", "expires_in"=>3599, "token_type"=>"[FILTERED]", "scope"=>"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile openid", "refresh_token"=>"[FILTERED]"}}
Sending HTTP get https://www.googleapis.com/oauth2/v2/userinfo?
200
#<HTTP::Message:0x00007f3bec47eda0 @http_body=#<HTTP::Message::Body:0x00007f3bec47ed50 @body="{\n" + "  \"id\": \"117055117427357512355\",\n" + "  \"email\": \"tuanda2@vmogroup.com\",\n" + "  \"verified_email\": true,\n" + "  \"name\": \"Äáº·ng Anh Tuáº¥n\",\n" + "  \"given_name\": \"Äáº·ng Anh\",\n" + "  \"family_name\": \"Tuáº¥n\",\n" + "  \"picture\": \"https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c\",\n" + "  \"locale\": \"vi\",\n" + "  \"hd\": \"vmogroup.com\"\n" + "}\n", @chunk_size=nil, @positions=nil, @size=0>, @http_header=#<HTTP::Message::Headers:0x00007f3bec4a7db8 @body_charset=nil, @body_date=nil, @body_encoding=#<Encoding:UTF-8>, @body_size=0, @body_type=nil, @chunked=false, @dumped=false, @header_item=[["Expires", "Mon, 01 Jan 1990 00:00:00 GMT"], ["Pragma", "no-cache"], ["Cache-Control", "no-cache, no-store, max-age=0, must-revalidate"], ["Date", "Thu, 13 Jul 2023 06:57:56 GMT"], ["Content-Type", "application/json; charset=UTF-8"], ["Vary", "Origin"], ["Vary", "X-Origin"], ["Vary", "Referer"], ["Content-Encoding", "gzip"], ["Server", "ESF"], ["X-XSS-Protection", "0"], ["X-Frame-Options", "SAMEORIGIN"], ["X-Content-Type-Options", "nosniff"], ["Alt-Svc", "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"], ["Transfer-Encoding", "chunked"]], @http_version="1.1", @is_request=false, @reason_phrase="OK", @request_absolute_uri=nil, @request_method="GET", @request_query=nil, @request_uri=#<Addressable::URI:0x44d4 URI:https://www.googleapis.com/oauth2/v2/userinfo?>, @status_code=200>, @peer_cert=#<OpenSSL::X509::Certificate subject=#<OpenSSL::X509::Name CN=upload.video.google.com>, issuer=#<OpenSSL::X509::Name CN=GTS CA 1C3,O=Google Trust Services LLC,C=US>, serial=#<OpenSSL::BN 249411776860780806590995962805214668189>, not_before=2023-06-19 08:20:47 UTC, not_after=2023-09-11 08:20:46 UTC>, @previous=nil>
Success - #<Google::Apis::Oauth2V2::Userinfo:0x00007f3bec42dec8
 @email="tuanda2@vmogroup.com",
 @family_name="Tuáº¥n",
 @given_name="Äáº·ng Anh",
 @hd="vmogroup.com",
 @id="117055117427357512355",
 @locale="vi",
 @name="Äáº·ng Anh Tuáº¥n",
 @picture=
  "https://lh3.googleusercontent.com/a/AAcHTtdIspA_aDFy6ag7HjnrAKszRiCAGCvuBzLeV7iToUv2xA=s96-c",
 @verified_email=true>

  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`email` = 'tuanda2@vmogroup.com' LIMIT 1[0m
  â†³ app/controllers/sessions_controller.rb:19:in `google_login'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE `users` SET `users`.`refresh_token` = '8bfdee5275d2b1754dede7fdb05698a205e7023cd59671a6e1aac204832476e9', `users`.`updated_at` = '2023-07-13 06:57:57.044666' WHERE `users`.`id` = 1[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/sessions_controller.rb:76:in `generate_refresh_token'
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.58ms)
Completed 200 OK in 324ms (Views: 2.5ms | ActiveRecord: 8.1ms | Allocations: 22929)


